/**
 * Pacotes necessários a ser instalados no projeto
 * 
 * ➜ tsc --init
 * 
 * ➜ npx tsc --init
 * 
 * ➜ npm init -y
 * 
 * ➜ npm install config dotenv express express-validator mogoose morgan winston
 * 
 * ➜ npm install @types/config @types/express @types/mongoose @types/morgan @types/node ts-node-dev typescript --save-dev
 * 
 * ➜ npm run dev
 */

// ➜ dotenv
require('dotenv').config();

// ➜ packages
import express from 'express'

// ➜ Porta
import { port } from '../config/default';

// ➜ Middlewares
import morganMiddleware from '../middlewares/morgan.middleware';

// ➜ Routers
import router from '../routers/router';

// ➜ Logger
import Logger from '../config/logger';

// ➜ Database
import  db  from '../database/db'


/************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/


// ➜ Ambient variável
const app =  express();

// ➜ router
app.use('/api/', router)

// ➜ morganMiddleware
app.use(morganMiddleware)

// ➜ middleware JSON
app.use(express.json());

app.listen(port, async () => {
    await db();
    Logger.info(`The application is running on the port ${port}`);
})